<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="GIEXExpiriesV">

	<cacheModel type="MEMORY" id="oneDayClient">
		<flushInterval hours="24"/>
		<property name="reference-type" value="WEAK"/>
	</cacheModel>

	<typeAlias alias="GIEXExpiriesVClass" type="com.geniisys.giex.entity.GIEXExpiriesV" />
	
	<resultMap class="java.util.HashMap" id="GIEXExpiriesVMap1" extends="BaseEntity.TableGridResultMap">
		<result property="policyId"					column="POLICY_ID" />
		<result property="expiryDate"				column="EXPIRY_DATE" />
		<result property="renewFlag"				column="RENEW_FLAG" />
		<result property="lineCd"						column="LINE_CD" />
		<result property="sublineCd"					column="SUBLINE_CD" />
		<result property="samePolnoSw"			column="SAME_POLNO_SW" />
		<result property="cpiRecNo"					column="CPI_REC_NO" />
		<result property="cpiBranchCd"			column="CPI_BRANCH_CD" />
		<result property="issCd"							column="ISS_CD" />
		<result property="postFlag"					column="POST_FLAG" />
		<result property="balanceFlag"				column="BALANCE_FLAG" />
		<result property="claimFlag"					column="CLAIM_FLAG" />
		<result property="extractUser"				column="EXTRACT_USER" />
		<result property="processor"				column="PROCESSOR" />
		<result property="credBranch"				column="CRED_BRANCH" />
		<result property="extractDate"				column="EXTRACT_DATE" />
		<result property="userId"						column="USER_ID" />
		<result property="lastUpdate"				column="LAST_UPDATE" />
		<result property="datePrinted"				column="DATE_PRINTED" />
		<result property="noOfCopies"				column="NO_OF_COPIES" />
		<result property="autoRenewFlag"		column="AUTO_RENEW_FLAG" />
		<result property="updateFlag"			column="UPDATE_FLAG" />
		<result property="tsiAmt"						column="TSI_AMT" />
		<result property="premAmt"					column="PREM_AMT" />
		<result property="renTsiAmt"				column="REN_TSI_AMT" />
		<result property="renPremAmt"			column="REN_PREM_AMT" />
		<result property="summarySw"			column="SUMMARY_SW" />
		<result property="inceptDate"				column="INCEPT_DATE" />
		<result property="assdNo"						column="ASSD_NO" />
		<result property="autoSw"					column="AUTO_SW" />
		<result property="taxAmt"						column="TAX_AMT" />
		<result property="policyTaxAmt"			column="POLICY_TAX_AMT" />
		<result property="issueYy"						column="ISSUE_YY" />
		<result property="polSeqNo"					column="POL_SEQ_NO" />
		<result property="renewNo"					column="RENEW_NO" />
		<result property="color"						column="COLOR" />
		<result property="motorNo"					column="MOTOR_NO" />
		<result property="modelYear"				column="MODEL_YEAR" />
		<result property="make"						column="MAKE" />
		<result property="serialNo"					column="SERIALNO" />
		<result property="plateNo"					column="PLATE_NO" />
		<result property="renNoticeCnt"			column="REN_NOTICE_CNT" />
		<result property="renNoticeDate"			column="REN_NOTICE_DATE" />
		<result property="itemTitle"					column="ITEM_TITLE" />
		<result property="locRisk1"					column="LOC_RISK1" />
		<result property="locRisk2"					column="LOC_RISK2" />
		<result property="locRisk3"					column="LOC_RISK3" />
		<result property="carCompany"			column="CAR_COMPANY" />
		<result property="intmNo"					column="INTM_NO" />
		<result property="remarks"					column="REMARKS" />
		<result property="origTsiAmt"				column="ORIG_TSI_AMT" />
		<result property="smsFlag"					column="SMS_FLAG" />
		<result property="renewalId"				column="RENEWAL_ID" />
		<result property="regPolicySw"				column="REG_POLICY_SW" />
		<result property="assdSms"					column="ASSD_SMS" />
		<result property="intmSms"					column="INTM_SMS" />
		<result property="emailDoc"					column="EMAIL_DOC" />
		<result property="emailSw"					column="EMAIL_SW" />
		<result property="emailStat"					column="EMAIL_STAT" />
		<result property="assdEmail"				column="ASSD_EMAIL" />
		<result property="intmEmail"				column="INTM_EMAIL" />
		<result property="nonRenReason"		column="NON_REN_REASON" />
		<result property="cocSerialNo"				column="COC_SERIAL_NO" />
		<result property="nonRenReasonCd"	column="NON_REN_REASON_CD" />
		<result property="packPolicyId"			column="PACK_POLICY_ID" />
		<result property="isPackage"					column="IS_PACKAGE" />
		<result property="policyNo"					column="POLICY_NO" />
		<result property="dspPrem"					column="DSP_PREM" />
		<result property="dspTsi"						column="DSP_TSI" />
		<result property="dspOrigPrem"			column="DSP_ORIG_PREM" />
		<result property="dspOrigTsi"				column="DSP_ORIG_TSI" />
		<result property="distSw"				    column="DIST_SW" />
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="GIEXExpiriesVMap2" extends="BaseEntity.TableGridResultMap">
		<result property="policyNo"					column="POLICY_NO" />
		<result property="parNo"						    column="PAR_NO" />
		<result property="samePolnoSw" column="same_polno_sw"/>
	</resultMap>
	
	<resultMap class= "java.util.HashMap" id="purgeExtractTableMap" extends="BaseEntity.TableGridResultMap">
		<result property="policyNo"					column="POLICY_NO" />
		<result property="lineCd"					column="LINE_CD" />
		<result property="sublineCd"				column="SUBLINE_CD" />
		<result property="issCd"					column="ISS_CD" />
		<result property="issueYy"					column="ISSUE_YY" />
		<result property="polSeqNo"					column="POL_SEQ_NO" />
		<result property="renewNo"					column="RENEW_NO" />
		<result property="tsiAmt"					column="TSI_AMT" />
		<result property="premAmt"					column="PREM_AMT" />
		<result property="expiryDate"				column="EXPIRY_DATE" />
		<result property="postFlag"					column="POST_FLAG" />
		<result property="expiryFlag"				column="EXPIRY_FLAG" />
	</resultMap>
	
	<resultMap class="GIEXExpiriesVCLass" id="assignExtractedExpiry" extends="BaseEntity.TableGridResultMap">
		<result property="lineCd"					column="LINE_CD" />
		<result property="sublineCd"				column="SUBLINE_CD" />
		<result property="issCd"					column="ISS_CD" />
		<result property="intmNo"    				column="INTM_NO" />
		<result property="issueYy"					column="ISSUE_YY" />
		<result property="polSeqNo"					column="POL_SEQ_NO" />
		<result property="renewNo"					column="RENEW_NO" />
		<result property="dspAssured"				column="DSP_ASSURED" />
		<result property="expiryDate"				column="EXPIRY_DATE" />
		<result property="expiryDateString"			column="EXPIRY_DATE_STRING" />
		<result property="extractDateString"		column="EXTRACT_DATE_STRING" />
		<result property="extractUser"				column="EXTRACT_USER" />
		<result property="tsiAmt"					column="TSI_AMT" />
		<result property="policyId"				    column="POLICY_ID" />
		<result property="packPolicyId"				column="PACK_POLICY_ID" />
		<result property="assdNo"				    column="ASSD_NO" />
		<result property="isPackage"				column="IS_PACKAGE" />
		<result property="policyNo"				  	column="POLICY_NO" />
		<result property="nbtReassignmentSw"		column="NBT_REASSIGNMENT_SW" />
		<result property="postFlag"					column="POST_FLAG" />
		
	</resultMap>

	<parameterMap class="map"  id="preFormGIEXS004Map">
		<parameter property="userId" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="allUser" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="mis" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="exist" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="postQueryGIEXS004Map">
		<parameter property="count" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="packPolicyId" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="policyId" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fromPostQuery" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="balanceFlag" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nonRenReason" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nonRenReasonCd" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="remarks" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="isPackage" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="nbtLineCd" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtSublineCd" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtIssCd" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtIssueYy" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtPolSeqNo" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtRenewNo" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="polPrem" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="origPolPrem" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="parId" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="lineCd" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="issCd" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="parYy" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="parSeqNo" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="quoteSeqNo" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="parType" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="assdNo" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="distSw" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="dspRenewFlag" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="polTsi" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="origPolTsi" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="userId" 						jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="processor" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="lastUpdate" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtEmailStatus" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="nbtSmsStatus" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="itmperilExist" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map"  id="checkPolicyGIEXS004Map">
		<parameter property="policyid" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="lineCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="sublineCd" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issueYy" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="polSeqNo" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="renewNo" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="msg" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="user" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="allUser" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="allowRenewalOtherUser"   jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/> <!-- Added by Jerome Bautista 03.14.2016 SR 21944 -->
	</parameterMap>
	
	<parameterMap class="map" id="checkRenewFlagGIEXS004Map">
		<parameter property="renewFlag" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="policyId" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="moduleId" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="userId"			jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="lineCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="proceed" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="msg" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="verifyOverrideRbGIEXS004Map">
		<parameter property="userId" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="policyId" 			jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="renewFlag" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="autoSw"			jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="balanceFlag" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="claimFlag"		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="distSw"				jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="msg" 					jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="msgAlert" 				jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="processPostButtonGIEXS004Map">
		<parameter property="user"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="allUser"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="overrideOk"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="override"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="menuLineCd"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="lineCa"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAv"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineFi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMh"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineEn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="vesselCd"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBpv"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="sublineMop"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineMrn"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineSu"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBbi"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="issRi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="msgAlert"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="msg"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="messageBox"			    jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="processPostOnOverrideGIEXS004Map">
		<parameter property="user"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="allUser"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="functionCd"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="process"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="menuLineCd"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="lineCa"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAv"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineFi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMh"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineEn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="vesselCd"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBpv"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="sublineMop"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineMrn"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineSu"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBbi"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="issRi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="fromPostQuery"		jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="perilPolId"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="needCommit"			jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="overrideOk"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="msg"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="msg2"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="messageBox"			    jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="msgAlert"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="saveProcessTagGIEXS004Map">
		<parameter property="appUser"   		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="userId"   		 	 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="allUser"			 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="intmNo"   		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="intmName"	 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="claimSw"   		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="balanceSw"	 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="rangeType"    jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="range"	 		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="fmDate"   		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="toDate"		    jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="fmMon"   		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="fmYear"	 		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="toMon"   		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="toYear"			 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineCd"    		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineCd"		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="issCd"   			 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="issueYy"	 		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="polSeqNo"   	 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="renewNo"		 jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="process"	 		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="checkNoOfRecordsToPurgeMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="basedOnParam"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromMonth"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromYear"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toMonth"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toYear"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromDate"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toDate"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="rangeType"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="range"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="cntProc"		jdbcType="VARCHAR"	javaType="java.lang.Integer"  mode="OUT"/>
		<parameter property="cntUnproc"		jdbcType="VARCHAR"	javaType="java.lang.Integer"  mode="OUT"/>
		<parameter property="cntProcAll"	jdbcType="VARCHAR"	javaType="java.lang.Integer"  mode="OUT"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedNotParamMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedNotTimeMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedOnBeforeMonthMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromMonth"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromYear"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedOnBeforeDateMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromDate"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedExactMonthMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromMonth"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromYear"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toMonth"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toYear"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	
	<parameterMap class="map" id="purgeBasedExactDateMap">
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allUser"		jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="misSw"			jdbcType="VARCHAR"	javaType="java.lang.String"	  mode="IN"/>
		<parameter property="allExpProc"	jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="allUnproc"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="issueYy"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="polSeqNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="renewNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="fromDate"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
		<parameter property="toDate"		jdbcType="VARCHAR"	javaType="java.lang.String"   mode="IN"/>
	</parameterMap>
	 
	 <resultMap class="GIEXExpiriesVCLass" id="updatedExpiry">
		<result property="lineCd"					column="LINE_CD" />
		<result property="sublineCd"				column="SUBLINE_CD" />
		<result property="issCd"					column="ISS_CD" />
		<result property="issueYy"					column="ISSUE_YY" />
		<result property="polSeqNo"					column="POL_SEQ_NO" />
		<result property="renewNo"					column="RENEW_NO" />
		<result property="dspAssured"				column="DSP_ASSURED" />
		<result property="expiryDate"				column="EXPIRY_DATE" />
		<result property="expiryDateString"			column="EXPIRY_DATE_STRING" />
		<result property="extractUser"				column="EXTRACT_USER" />
		<result property="tsiAmt"					column="TSI_AMT" />
		<result property="policyId"				    column="POLICY_ID" />
		<result property="packPolicyId"				column="PACK_POLICY_ID" />
		<result property="assdNo"				    column="ASSD_NO" />
		<result property="isPackage"				column="IS_PACKAGE" />
		<result property="policyNo"				  	column="POLICY_NO" />
		<result property="nbtReassignmentSw"		column="NBT_REASSIGNMENT_SW" />
	</resultMap>
	
	<select id="getExpiredPolicies" resultMap="GIEXExpiriesVMap1" parameterClass="java.util.HashMap">		
	    SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (giex_expiries_v_pkg.get_expired_policies(#userId#, #allUser#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY POLICY_NO
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="expiryDate">
			              		ORDER BY EXPIRY_DATE
			              </isEqual>
			               <isEqual property="sortColumn" compareValue="dspPrem">
			              		ORDER BY DSP_PREM
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="dspTsi">
			              		ORDER BY DSP_TSI
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="dspOrigPrem">
			              		ORDER BY DSP_ORIG_PREM
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="dspOrigTsi">
			              		ORDER BY DSP_ORIG_TSI
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="tsiAmt">	<!-- Kenneth L. 10.21.2013 -->
			              		ORDER BY TSI_AMT
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="premAmt"> <!-- Kenneth L. 10.21.2013 -->
			              		ORDER BY PREM_AMT
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="processor">
			              		ORDER BY PROCESSOR
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (giex_expiries_v_pkg.get_expired_policies(#userId#, #allUser#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getQueriedExpiredPolicies" resultMap="GIEXExpiriesVMap1" parameterClass="java.util.HashMap">		
	    <!-- Modified by pjsantos 10/13/2016, for optimization GENQA 5685 -->
	    <!--  SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT  DISTINCT * -->
		                   SELECT * FROM TABLE (giex_expiries_v_pkg.get_queried_expired_policies(#userId#, #allUser#, #intmNo#, #intmName#, #claimSw#, #balanceSw#, #rangeType#, #range#, 
		                  										#fmDate#, #toDate#, #fmMon#, #fmYear#, #toMon#, #toYear#,  #lineCd#, #sublineCd#, #issCd#, #issueYy#,  #polSeqNo#, #renewNo#,
		                  										#sortColumn#, #ascDescFlg#, #from#, #to#))
		                  <!-- ORDER BY LINE_CD, SUBLINE_CD, ISS_CD, EXPIRY_DATE  commented out by Gzelle 11182014-->
		                  <!-- <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY POLICY_NO
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="expiryDate">
			              		ORDER BY EXPIRY_DATE
			              </isEqual>
			               <isEqual property="sortColumn" compareValue="dspPrem">
			              		ORDER BY DSP_PREM
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="dspTsi">
			              		ORDER BY DSP_TSI
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="premAmt">-->	<!-- modified by Gzelle 11182014 -->
			              <!--  		ORDER BY PREM_AMT
			              </isEqual>
		                  <isEqual property="sortColumn" compareValue="tsiAmt">	-->	<!-- modified by Gzelle 11182014 -->
			              <!-- 		ORDER BY TSI_AMT
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="extractUser">
			              		ORDER BY extract_user
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="processor">
			              		ORDER BY processor
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="credBranch">
			              		ORDER BY cred_branch
			              </isEqual>			              
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a  , 
		               (SELECT count(DISTINCT policy_no) count_ 
		                  FROM TABLE (giex_expiries_v_pkg.get_queried_expired_policies(#userId#, #allUser#, #intmNo#, #intmName#, #claimSw#, #balanceSw#, #rangeType#, #range#, 
		                  										#fmDate#, #toDate#, #fmMon#, #fmYear#, #toMon#, #toYear#,  #lineCd#, #sublineCd#, #issCd#, #issueYy#,  #polSeqNo#, #renewNo#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
		   ORDER BY line_cd, subline_cd, iss_cd, expiry_date-->		<!-- added by Gzelle 11182014 -->
	</select>
	
<!-- <select id="getRenewedPoliciesSummary" resultMap="GIEXExpiriesVMap2" parameterClass="java.util.HashMap">		
	    SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT DISTINCT* 
		                  FROM TABLE (giex_expiries_v_pkg.display_renewals(#policyIds#))) a, 
		               (SELECT count(DISTINCT policy_no) count_ 
		                  FROM TABLE (giex_expiries_v_pkg.display_renewals(#policyIds#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>	 -->
	
	<select id="getRenewedPoliciesSummary" resultMap="GIEXExpiriesVMap2" parameterClass="java.util.HashMap">		
	    SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (giex_expiries_v_pkg.get_renewed_list(#policyIds#))) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (giex_expiries_v_pkg.get_renewed_list(#policyIds#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>	
	
	<select id="getPolIdForProcess" resultClass="java.lang.Integer" parameterClass="java.util.HashMap">		
		SELECT policy_id FROM TABLE(giex_expiries_v_pkg.get_policy_id_for_process(#user#, #allUser#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#,
												 #claimSw#, #balanceSw#, #intmName#, #intmNo#, #rangeType#, #range#, TO_DATE(#fmDate#, 'mm-dd-yyyy'), TO_DATE(#toDate#, 'mm-dd-yyyy'), #fmMon#, #toMon#, #fmYear#, #toYear#))	
	</select> <!--JOANNE -->
	
	<procedure id="preFormGIEXS004"  parameterMap="preFormGIEXS004Map">
		CALL giexs004_pre_form(?, ?, ?, ?)
	</procedure>
	
	<procedure id="postQueryGIEXS004"  parameterMap="postQueryGIEXS004Map">
		CALL giex_expiries_v_pkg.giexs004_post_query(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="checkPolicyGIEXS004"  parameterMap="checkPolicyGIEXS004Map">
		CALL check_policy_giexs004(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) <!-- Added a parameter Jerome Bautista 03.14.2016 SR 21944 -->
	</procedure>
	
	<procedure id="checkRenewFlagGIEXS004"  parameterMap="checkRenewFlagGIEXS004Map">
		CALL giex_expiries_v_pkg.check_renew_flag(?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="verifyOverrideRbGIEXS004"  parameterMap="verifyOverrideRbGIEXS004Map">
		CALL giex_expiries_v_pkg.verify_override_rb(?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="processPostButtonGIEXS004"  parameterMap="processPostButtonGIEXS004Map">
		CALL process_post_button(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>		
	
	<procedure id="processPostOnOverrideGIEXS004"  parameterMap="processPostOnOverrideGIEXS004Map">
		CALL process_post_on_override(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="saveProcessTagGIEXS004"  parameterMap="saveProcessTagGIEXS004Map">
		BEGIN
			GIIS_USERS_PKG.app_user := ?;
			giex_expiries_v_pkg.save_process_tag(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
		END;
	</procedure>
	
	<select id="getPurgeExtractTable" resultMap="purgeExtractTableMap" parameterClass="java.util.HashMap">
		<!--SELECT *    Modified by pjsantos 10/10/2016, GENQA 5688
		  FROM (SELECT rownum rownum_,
		              COUNT(1) OVER() count_,   b.count_,  
		               a.*
		          FROM (--> SELECT * FROM TABLE(GIEX_EXPIRIES_V_PKG.get_extracted_policies(#userId#, #allUser#, #intmNo#, #policyNo#,
		          																		#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #tsiAmt#, #premAmt#, #expiryDate#,
		          																		#fromMonth#, #fromYear#, #toMonth#, #toYear#, #fromDate#, #toDate#, #range#,
		          																		#sortColumn#, #ascDescFlg#, #from#, #to#))
		        					
		         <!-- <isNotNull property="sortColumn">
		         <isEqual property="sortColumn" compareValue="policyNo">
		         		ORDER BY policy_no
		         </isEqual>
		         <isEqual property="sortColumn" compareValue="tsiAmt">
		         		ORDER BY tsi_amt
		          </isEqual>
		         <isEqual property="sortColumn" compareValue="premAmt">
		         		ORDER BY prem_amt
		         </isEqual>
		         <isEqual property="sortColumn" compareValue="expiryDate">
		         		ORDER BY expiry_date
		         </isEqual>
		         <isEqual property="ascDescFlg" compareValue="ASC">
		         		ASC
		         </isEqual>
		         <isEqual property="ascDescFlg" compareValue="DESC">
		         		DESC
		         </isEqual>
		         </isNotNull>) a ,
		    (SELECT count(*) count_
		       FROM TABLE(GIEX_EXPIRIES_V_PKG.get_extracted_policies(#userId#, #allUser#, #intmNo#, #policyNo#,
		       															#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #tsiAmt#, #premAmt#, #expiryDate#,
		       															#fromMonth#, #fromYear#, #toMonth#, #toYear#, #fromDate#, #toDate#, #range#))
	     	   )b )
		WHERE rownum_ BETWEEN #from# AND #to#-->
	</select>
	
	<procedure id="purgeBasedNotParam" parameterMap="purgeBasedNotParamMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_not_param(?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="purgeBasedNotTime" parameterMap="purgeBasedNotTimeMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_not_time(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="purgeBasedOnBeforeMonth" parameterMap="purgeBasedOnBeforeMonthMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_on_before_month(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="purgeBasedOnBeforeDate" parameterMap="purgeBasedOnBeforeDateMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_on_before_date(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="purgeBasedExactMonth" parameterMap="purgeBasedExactMonthMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_exact_month(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<procedure id="purgeBasedExactDate" parameterMap="purgeBasedExactDateMap">
		CALL GIEX_EXPIRIES_V_PKG.purge_based_exact_date(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>

	<procedure id="checkNoOfRecordsToPurge" parameterMap="checkNoOfRecordsToPurgeMap">
		CALL GIEX_EXPIRIES_V_PKG.check_no_of_records_to_purge(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</procedure>
	
	<select id="getPolicyIdGiexs006" resultMap="GIEXExpiriesVMap2">
		SELECT * FROM TABLE(giex_expiries_v_pkg.get_policy_id_giexs006(#frRnSeqNo#,#toRnSeqNo#,#assdNo#,#intmNo#,#issCd#,#sublineCd#,#lineCd#,#startDate#,#endDate#,#userId#,#renewFlag#,#reqRenewalNo#))
	</select>
	
	<resultMap class="java.util.HashMap" id="giex004InitialVariablesMap">
		<result property="vOverride" column="vOverride"/>
		<result property="vRequireNRReason" column="vRequireNRReason"/>
		<result property="vAllowAR" column="vAllowAR"/>
		<result property="vAllowARWDist" column="vAllowARWDist"/>
		<result property="vExpiryAllowUndist" column="vExpiryAllowUndist"/>
		<result property="vOverrideRenewal" column="vOverrideRenewal"/>
		<result property="vAllowRenewalOtherUser" column="allow_renewal_other_user"/>
		<result property="vValidateMcFmv" column="validate_mc_fmv"/> <!-- benjo 11.24.2016 SR-5621 -->
	</resultMap>
	
	<select id="getGiex004InitialVariables" resultMap="giex004InitialVariablesMap">
		SELECT * FROM TABLE(giex_expiries_v_pkg.get_initial_variables)
	</select>	
	
	<parameterMap class="java.util.HashMap" id="giexs004ProcessPostButtonMap">
		<parameter property="moduleId" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="userId" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="allUser" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<!--JOANNE -->
		<parameter property="lineCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="sublineCd" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issueYy" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="polSeqNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="renewNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="claimSw" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="balanceSw" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="intmName" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="intmNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="rangeType" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="range" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmDate" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toDate" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmMon" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toMon" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmYear" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toYear" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<!--JOANNE END-->
		<parameter property="vOverrideRenewal" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="tempACOverride" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="tempABOverride" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="tempRBOverride" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="tempAROverride" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="message" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
		<parameter property="renewFlag" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" />
		<parameter property="confirmBranchSw" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
		<parameter property="confirmFmvSw" 	    jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/> <!-- benjo 11.24.2016 SR-5621 -->
		<parameter property="vValidateMcFmv" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/> <!-- benjo 11.24.2016 SR-5621 -->
		<parameter property="polCount"	        jdbcType="VARCHAR" javaType="java.lang.Integer" mode="OUT"/> <!-- benjo 11.24.2016 SR-5621 -->
	</parameterMap>
	
	<procedure id="giexs004ProcessPostButton" parameterMap="giexs004ProcessPostButtonMap">
		CALL giexs004_process_post_button(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,TO_DATE(?, 'mm-dd-yyyy'),TO_DATE(?, 'mm-dd-yyyy'),?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) <!--JOANNE --> <!-- benjo 11.24.2016 SR-5621 -->
	</procedure>
	
	<parameterMap class="java.util.HashMap" id="giexs004ProcessRenewalMap">
		<parameter property="userId" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="allUser" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="message" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	</parameterMap>
	
	<procedure id="giexs004ProcessRenewal" parameterMap="giexs004ProcessRenewalMap" >
		CALL giexs004_process_renewal(?,?,?)	
	</procedure>
	
	<parameterMap class="map" id="processPostButtonGIEXS004Map2">
		<parameter property="allUser"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="user"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="menuLineCd"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="lineCa"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineAv"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineFi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMc"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineMh"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineEn"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="vesselCd"					jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBpv"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="INOUT"/>
		<parameter property="sublineMop"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineMrn"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineSu"						jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineBbi"				jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="issRi"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<parameter property="msg"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="messageBox"			    jdbcType="VARCHAR"		javaType="java.lang.String"	mode="OUT"/>
		<parameter property="vAllowARWDist"							jdbcType="VARCHAR"		javaType="java.lang.String"	mode="IN"/>
		<!-- marco - 08.12.2014 - added parameters below -->
		<parameter property="lineCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="sublineCd" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issCd" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="issueYy" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="polSeqNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="renewNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="claimSw" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="balanceSw" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="intmName" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="intmNo" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="rangeType" 	jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="range" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmDate" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toDate" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmMon" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toMon" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="fmYear" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
		<parameter property="toYear" 		jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	</parameterMap>
	
	<procedure id="giexs004ProcessPolicies"  parameterMap="processPostButtonGIEXS004Map2">
		CALL giexs004_process_policies(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,
									   ?,?,?,?,?,?,?,?,?,?,?,?,TO_DATE(?, 'mm-dd-yyyy'),TO_DATE(?, 'mm-dd-yyyy'),?,?,?,?)
	</procedure>	
	
	<select id="showAssignExtractedExpiryRecord" resultMap="assignExtractedExpiry">
  		 SELECT * FROM TABLE(GIEXS008_PKG.get_expiry_record(#userId#,#policyNo#,#dspAssured#,#expiryDateString#,#extractUser#,#sortColumn#,#ascDescFlg#,#from#,#to#,
  		 													#fromDate#,#toDate#,#lineCd#,#sublineCd#,#issCd#,#credBranch#,#intmNo#,#byDate#))
  	</select>
 
  	<procedure id="updateExpiryRecord" parameterClass="com.geniisys.giex.entity.GIEXExpiriesV">
  		BEGIN
  			GIIS_USERS_PKG.app_user := #extractUser#;	<!-- Gzelle 07062015 SR3936  -->
  			GIEXS008_PKG.UPDATE_EXTRACTED_EXPIRIES(#extractUser#, #policyId#, #isPackage#);
  		END;
  	</procedure>

	<parameterMap class="map" id="updateExpiriesParamMap">	<!-- start Gzelle 07162015 SR4744-->
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="extractUser"	jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="policyId1"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="policyId2"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="policyId3"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="statusTag"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="userId"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="fromDate"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="toDate"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="lineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="sublineCd"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="issCd"			jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="credBranch"	jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="intmNo"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="byDate"		jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
		<parameter property="to"			jdbcType="VARCHAR"	javaType="java.lang.String"	mode="IN"/>
	</parameterMap>											<!-- end Gzelle 07162015 SR4744 -->
  	
  	<procedure id="updateExpiriesByBatch" parameterMap="updateExpiriesParamMap"> <!--Gzelle 07162015 SR4744  -->
  		BEGIN
   			GIIS_USERS_PKG.app_user := ?;	<!--Gzelle 06302015 SR3936  -->
			GIEXS008_PKG.UPDATE_EXPIRIES_BY_BATCH(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);	<!-- Gzelle 07162015 SR4744 -->
  		END;
  	</procedure>
  	
  	<select id="checkExtractUserAccess" resultClass="java.lang.Integer">
  		SELECT CHECK_USER_PER_LINE2 (#lineCd#, #issCd#, #moduleId#, #extractUser#) from dual
  	</select>
  	
  	<select id="checkRecords" resultClass="java.lang.String">
  		SELECT GIEXS008_PKG.CHECK_RECORDS (#extractUser#, #fromDate#, #toDate#, #userId#, #byDate#, #misSw#, #lineCd#, #sublineCd#, #issCd#, #intmNo#) from dual
  	</select>
  	
  	<select id="checkSubline" resultClass="java.lang.String">
  		SELECT GIEXS008_PKG.CHECK_SUBLINE_LIST(#lineCd#, #sublineCd#) from dual
  	</select>
  	
  	<resultMap class="java.util.HashMap" id="gipisViewRenewalMap"  extends="BaseEntity.TableGridResultMap">
		<result column="POLICY_NUMBER" 			property="policyNumber" />
		<result column="ASSURED" 				property="assured" />
		<result column="RENEWAL_NO" 			property="renewalNo" />
		<result column="USER_ID" 				property="userId" />
		<result column="WITH_RENEWAL" 			property="withRenewal" />
		<result column="POLICY_ID" 				property="policyId" />
		<result column="ROWNUM_" 				property="rowNum" />
		<result column="COUNT_" 				property="rowCount" />
	</resultMap>

	<select id="getViewRenewalList" resultMap="gipisViewRenewalMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, a.*
		          FROM (SELECT * 
		                  FROM TABLE (gipis179_pkg.get_gipis179_list(#user#))
		                  <isNotNull property="filter">
				   		  	WHERE 1=1
			   		  		<isNotEmpty prepend="AND" property="policyNumber">
			   		  			UPPER(POLICY_NUMBER) LIKE UPPER(#policyNumber#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="assured">
			   		  			UPPER(ASSURED) LIKE UPPER(#assured#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="renewalNo">
			   		  			UPPER(RENEWAL_NO) LIKE UPPER(#renewalNo#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="userId">
			   		  			UPPER(USER_ID) LIKE UPPER(#userId#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="withRenewal">
			   		  			UPPER(WITH_RENEWAL) LIKE UPPER(#withRenewal#)
			   		  		</isNotEmpty>
				   		  </isNotNull>
		                  <isEqual property="sortColumn" compareValue="policyNumber">
			              		ORDER BY POLICY_NUMBER
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assured">
			              		ORDER BY ASSURED
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="renewalNo">
			              		ORDER BY RENEWAL_NO
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="userId">
			              		ORDER BY USER_ID
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="withRenewal">
			              		ORDER BY WITH_RENEWAL
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>) a, 
		               (SELECT count(*) count_
		                  FROM TABLE (gipis179_pkg.get_gipis179_list(#user#))
		                  <isNotNull property="filter">
				   		  	WHERE 1=1
			   		  		<isNotEmpty prepend="AND" property="policyNumber">
			   		  			UPPER(POLICY_NUMBER) LIKE UPPER(#policyNumber#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="assured">
			   		  			UPPER(ASSURED) LIKE UPPER(#assured#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="renewalNo">
			   		  			UPPER(RENEWAL_NO) LIKE UPPER(#renewalNo#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="userId">
			   		  			UPPER(USER_ID) LIKE UPPER(#userId#)
			   		  		</isNotEmpty>
			   		  		<isNotEmpty prepend="AND" property="withRenewal">
			   		  			UPPER(WITH_RENEWAL) LIKE UPPER(#withRenewal#)
			   		  		</isNotEmpty>
				   		  </isNotNull>
				   		  ) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#	
	</select>
	
	<resultMap class="java.util.HashMap" id="getRenewalHistoryMap"  extends="BaseEntity.TableGridResultMap">
		<result column="POLICY_NUMBER" 			property="policyNumber" />
		<result column="ROWNUM_" 				property="rowNum" />
		<result column="COUNT_" 				property="rowCount" />
	</resultMap>

	<select id="getRenewalHistoryList" resultMap="getRenewalHistoryMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, a.*
		          FROM (SELECT * 
		                  FROM TABLE (gipis179_pkg.get_renewal_history_list(#policyId#))
		                  <isNotNull property="filter">
				   		  	WHERE 1=1
			   		  		<isNotEmpty prepend="AND" property="policyNumber">
			   		  			UPPER(POLICY_NUMBER) LIKE UPPER(#policyNumber#)
			   		  		</isNotEmpty>
				   		  </isNotNull>
		                  <isEqual property="sortColumn" compareValue="policyNumber">
			              		ORDER BY POLICY_NUMBER
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>) a, 
		               (SELECT count(*) count_
		                  FROM TABLE (gipis179_pkg.get_renewal_history_list(#policyId#))
		                  <isNotNull property="filter">
				   		  	WHERE 1=1
			   		  		<isNotEmpty prepend="AND" property="policyNumber">
			   		  			UPPER(POLICY_NUMBER) LIKE UPPER(#policyNumber#)
			   		  		</isNotEmpty>
				   		  </isNotNull>
				   		  ) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#	
	</select>

	<!-- start Gzelle 07102015 SR4744 -->
  <resultMap id="creditingBranchListingMap" class="java.util.HashMap" >
	  	<result column="ISS_CD"				property="credBranchCd"/>
	  	<result column="ISS_NAME"			property="credBranchName"/>  
		<result property="rowNum"			column="ROWNUM_"/>
		<result property="rowCount"			column="COUNT_"/>
  </resultMap>	
	
	<select id="getGiexs008CredBranchLov" resultMap="creditingBranchListingMap" parameterClass="java.util.HashMap">		
		SELECT *
  		  FROM (SELECT ROWNUM rownum_, 
	               	   b.count_, 
	              	   a.* 
	          	  FROM (SELECT * FROM TABLE(giexs008_pkg.get_cred_branch_lov)
          	   	 <isNull property="findText">
					WHERE iss_cd LIKE upper(NVL(#search#, iss_cd)) OR iss_name LIKE upper(NVL(#search#, iss_name))
				 </isNull>
				 <isNotNull property="findText">
					WHERE iss_cd LIKE upper(#findText#) OR iss_name LIKE upper(#findText#)
				 </isNotNull>
					
	            <isEqual property="sortColumn" compareValue="credBranchCd">
              		ORDER BY iss_cd
	            </isEqual>
	            <isEqual property="sortColumn" compareValue="credBranchName">
              		ORDER BY iss_name
	            </isEqual>
	            <isNotNull property="sortColumn">
              		<isEqual property="ascDescFlg" compareValue="ASC">
              			ASC
              		</isEqual>
              		<isEqual property="ascDescFlg" compareValue="DESC">
              			DESC
              		</isEqual>
              	</isNotNull>) a,
              (SELECT count(*) count_
	          	 FROM TABLE(giexs008_pkg.get_cred_branch_lov)
	            <isNull property="findText">
			   		WHERE iss_cd LIKE upper(NVL(#search#, iss_cd)) OR iss_name LIKE upper(NVL(#search#, iss_name))
				</isNull>
				<isNotNull property="findText">
					WHERE iss_cd LIKE upper(#findText#) OR iss_name LIKE upper(#findText#)
				</isNotNull>)b) 
	    	WHERE rownum_ BETWEEN #from# AND #to# 	
 	</select>
 	<!-- end Gzelle 07102015 SR4744 -->
</sqlMap>