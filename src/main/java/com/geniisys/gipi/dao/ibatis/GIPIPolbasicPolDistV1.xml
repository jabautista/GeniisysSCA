<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="GIPIPolbasicPolDistV1">
	<typeAlias alias="GIPIPolbasicPolDistV1" type="com.geniisys.gipi.entity.GIPIPolbasicPolDistV1"/>
	
	<resultMap class="GIPIPolbasicPolDistV1" id="getGIPIPolbasicPolDistV1ResultMap">
		<result property="policyId"			column="POLICY_ID"/>
		<result property="lineCd"			column="LINE_CD"/>
		<result property="sublineCd"		column="SUBLINE_CD"/>
		<result property="issCd"			column="ISS_CD"/>
		<result property="issueYy"			column="ISSUE_YY"/>
		<result property="polSeqNo"			column="POL_SEQ_NO"/>
		<result property="endtIssCd"		column="ENDT_ISS_CD"/>
		<result property="endtYy"			column="ENDT_YY"/>
		<result property="endtSeqNo"		column="ENDT_SEQ_NO"/>
		<result property="renewNo"			column="RENEW_NO"/>
		<result property="parId"			column="PAR_ID"/>
		<result property="polFlag"			column="POL_FLAG"/>
		<result property="assdNo"			column="ASSD_NO"/>
		<result property="assdName"			column="ASSD_NAME"/>
		<result property="acctEntDate"		column="ACCT_ENT_DATE"/>
		<result property="spldFlag"			column="SPLD_FLAG"/>
		<result property="packPolFlag"		column="PACK_POL_FLAG"/>
		<result property="distFlag"			column="DIST_FLAG"/>
		<result property="distNo"			column="DIST_NO"/>
		<result property="effDate"			column="EFF_DATE"/>
		<result property="expiryDate"		column="EXPIRY_DATE"/>
		<result property="negateDate"		column="NEGATE_DATE"/>
		<result property="distType"			column="DIST_TYPE"/>
		<result property="acctNegDate"		column="ACCT_NEG_DATE"/>
		<result property="parType"			column="PAR_TYPE"/>
		<result property="meanDistFlag"		column="MEAN_DIST_FLAG"/>
		<result property="policyNo"			column="POLICY_NO"/>
		<result property="endtNo"			column="ENDT_NO"/>
		<result property="batchId"			column="BATCH_ID"/>
		<result property="multiBookingMm" 	column="multi_booking_mm"/>
		<result property="multiBookingYy" 	column="multi_booking_yy"/>
		<result property="msgAlert"			column="msg_alert"/>
		<result property="rowNum" 			column="ROWNUM_"/>			
		<result property="rowCount"			column="COUNT_"/>
	</resultMap>
	
	<resultMap class="java.util.HashMap" id="getGiuws012CurrencyMap">
		<result property="currencyCd"		column="CURRENCY_CD" />
		<result property="currencyDesc"		column="CURRENCY_DESC" />
	</resultMap>
	
	<parameterMap class="map" id="createMissingDistRecMap">
		<parameter property="userId" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="distNo" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="policyId" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="packPolFlag" 	jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="lineCd" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="sublineCd" 	jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="issCd" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="IN" />
		<parameter property="msgAlert" 		jdbcType="VARCHAR"		javaType="java.lang.String"		mode="OUT" />
	</parameterMap>

	
	<select id="getGIPIPolbasicPolDistV1List" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_polbasic_pol_dist_v1(#moduleId#, #userId#, #filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_polbasic_pol_dist_v1(#moduleId#, #userId#, #filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getGIPIPolbasicPolDistV1List2" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_polbasic_pol_dist_v1(#moduleId#, #userId#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_polbasic_pol_dist_v1(#moduleId#, #userId#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>	
	
<!-- 	<select id="getGIPIPolbasicPolDistV1ListForPerilDist" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_for_peril_dist(#filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_for_peril_dist(#filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select> -->

	<select id="getGIUWS012PolicyListing" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_for_peril_dist(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#))
		                 WHERE check_user_per_iss_cd2(#lineCd#, iss_cd, 'GIUWS012', #userId#) = 1
		                   AND check_user_per_line2(line_cd, #issCd#, 'GIUWS012', #userId#) = 1
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_for_peril_dist(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#))
		                 WHERE check_user_per_iss_cd2(#lineCd#, iss_cd, 'GIUWS012', #userId#) = 1
		                   AND check_user_per_line2(line_cd, #issCd#, 'GIUWS012', #userId#) = 1) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>

	
<!-- 	<select id="getGIPIPolbasicPolDistV1ListOneRiskDist" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_one_risk_dist(#filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#,#filter.userId#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_one_risk_dist(#filter.lineCd#, #filter.sublineCd#, #filter.issCd#, #filter.issueYy#, #filter.polSeqNo#, #filter.renewNo#, #filter.endtYy#, #filter.endtSeqNo#, #filter.assdName#, #filter.distNo#,#filter.userId#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select> -->
	
	<select id="getGIUWS013PolicyListing" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_one_risk_dist(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#, #userId#))
		                  <isNotNull property="filter">
							  WHERE 1=1
								<isNotEmpty prepend="AND"  property="endtIssCd">
									UPPER(endt_iss_cd) LIKE UPPER(#endtIssCd#)
									AND NVL(DIST_FLAG,'1') != '3'
	                                AND NOT EXISTS( SELECT '1'
	                                                  FROM GIRI_DISTFRPS  x
	                                                 WHERE x.DIST_NO = DIST_NO
	                                                   AND RI_FLAG  IN ('2','3','4'))
									AND endt_seq_no > 0
								</isNotEmpty>
								<isNotEmpty prepend="AND"  property="endtYy">
									UPPER(endt_yy) LIKE UPPER(#endtYy#)
									AND NVL(DIST_FLAG,'1') != '3'
	                                AND NOT EXISTS( SELECT '1'
	                                                  FROM GIRI_DISTFRPS  x
	                                                 WHERE x.DIST_NO = DIST_NO
	                                                   AND RI_FLAG  IN ('2','3','4'))
									AND endt_seq_no > 0
								</isNotEmpty>
						  </isNotNull>
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_one_risk_dist(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#, #userId#))
		               <isNotNull property="filter">
						  WHERE 1=1
							<isNotEmpty prepend="AND"  property="endtIssCd">
								UPPER(endt_iss_cd) LIKE UPPER(#endtIssCd#)
								AND NVL(DIST_FLAG,'1') != '3'
	                                AND NOT EXISTS( SELECT '1'
	                                                  FROM GIRI_DISTFRPS  x
	                                                 WHERE x.DIST_NO = DIST_NO
	                                                   AND RI_FLAG  IN ('2','3','4'))
								AND endt_seq_no > 0
							</isNotEmpty>
							<isNotEmpty prepend="AND"  property="endtYy">
								UPPER(endt_yy) LIKE UPPER(#endtYy#)
								AND NVL(DIST_FLAG,'1') != '3'
                                AND NOT EXISTS( SELECT '1'
                                                  FROM GIRI_DISTFRPS  x
                                                 WHERE x.DIST_NO = DIST_NO
                                                   AND RI_FLAG  IN ('2','3','4'))
								AND endt_seq_no > 0
							</isNotEmpty>
					   </isNotNull>
						) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>	
	
<!-- 	<select id="getGIPIPolbasicPolDistV1ListForNegPostDist" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_neg_post_distr(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#,#userId#))
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_neg_post_distr(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#,#userId#))) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select> -->
	
	<select id="getGIUTS002PolicyListing" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_neg_post_distr(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#,#userId#))
		                 WHERE 1=1
		                   AND check_user_per_iss_cd2 (line_cd,iss_cd,'GIUTS002',#userId#) = 1
		                  <isNotNull property="filter">
								<isNotEmpty prepend="AND"  property="endtIssCd">
									UPPER(endt_iss_cd) LIKE UPPER(#endtIssCd#)
									AND endt_seq_no > 0
							    </isNotEmpty>
						  </isNotNull>
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_neg_post_distr(#lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#,#userId#))
		                 WHERE 1=1
		                   AND check_user_per_iss_cd2 (line_cd,iss_cd,'GIUTS002',#userId#) = 1 
		                <isNotNull property="filter">
								<isNotEmpty prepend="AND"  property="endtIssCd">
									UPPER(endt_iss_cd) LIKE UPPER(#endtIssCd#)
									AND endt_seq_no > 0
							    </isNotEmpty>
					    </isNotNull>
		               ) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getGIPIPolbasicPolDistV1TSIPremGrp" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_tsi_prem_distr(#moduleId#, #userId#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#))
		                  WHERE check_user_per_iss_cd2(#lineCd#, iss_cd, 'GIUWS016', #userId#) = 1
		                   AND check_user_per_line2(line_cd, #issCd#, 'GIUWS016', #userId#) = 1
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_tsi_prem_distr(#moduleId#, #userId#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#)))
		                   b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getV1ListDistByTsiPremPeril2" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
                          FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_dist_by_tsi_prem_peril(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#)) 
                         WHERE 1=1
                           AND dist_no = #distNo#) a,
                       (SELECT count(*) count_
                          FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_dist_by_tsi_prem_peril(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#)) 
                         WHERE 1=1
                           AND dist_no = #distNo#) b   
                       )   
	</select>
	
	<select id="getV1ListDistByTsiPremPeril" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_dist_by_tsi_prem_peril(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#))
		                  WHERE check_user_per_iss_cd2(#lineCd#, iss_cd, 'GIUWS017', #userId#) = 1
		                   AND check_user_per_line2(line_cd, #issCd#, 'GIUWS017', #userId#) = 1 <!-- added by steven 06.16.2014 -->
		                  <isNotNull property="filter">
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								endt_iss_cd = #endtIssCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>	
						  </isNotNull>	
						  <isNull property="filter">
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>
						  </isNull>
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a, 
		               (SELECT count(*) count_ 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_dist_by_tsi_prem_peril(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#))
		                   WHERE check_user_per_iss_cd2(#lineCd#, iss_cd, 'GIUWS017', #userId#) = 1
		                   	AND check_user_per_line2(line_cd, #issCd#, 'GIUWS017', #userId#) = 1 <!-- added by steven 06.16.2014 -->
		                  <isNotNull property="filter">
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								endt_iss_cd = #endtIssCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>	
						  </isNotNull>
						  <isNull property="filter">
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>
						  </isNull>
		                  ) b) 
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getGIUWS017Rec" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT '1' rownum_, 
		       '1' count_,
		        a.*
		  FROM TABLE(gipi_polbasic_pol_dist_v1_pkg.get_v1_dist_by_tsi_prem_peril(#moduleId#,#lineCd#,#issCd#,#userId#,#endtIssCd#,#endtYy#)) a
			 WHERE line_cd = #lineCd#
			   AND subline_cd = #sublineCd#
			   AND iss_cd = #issCd#
			   AND issue_yy = #issueYy#
			   AND pol_seq_no = #polSeqNo#
			   AND renew_no = #renewNo#
			   AND dist_no = #distNo#
	</select>
	
	<select id="getGiuws012Currency" resultMap="getGiuws012CurrencyMap" parameterClass="java.util.HashMap">
		SELECT * FROM TABLE(GIPI_POLBASIC_POL_DIST_V1_PKG.get_giuws012_currency_desc(#policyId#, #distNo#, #distSeqNo#))
	</select>
	
	<select id="getV1PopMissingDistRec" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_pop_missing_dist_rec(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#, #endtSeqNo#))
		                  <isNotNull property="filter">
						  WHERE 1=1
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								endt_iss_cd = #endtIssCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>		
						  </isNotNull>	
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		                  ) a,
                       (SELECT count(*) count_ 
                          FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_v1_pop_missing_dist_rec(#moduleId#, #lineCd#, #issCd#, #userId#, #endtIssCd#, #endtYy#, #endtSeqNo#))
                          <isNotNull property="filter">
						  WHERE 1=1
								<isNotEmpty prepend="AND"  property="lineCd">
								line_cd LIKE #lineCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								subline_cd LIKE #sublineCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								iss_cd LIKE #issCd#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								endt_iss_cd = #endtIssCd#
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>		
						  </isNotNull>
                          ) b)
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<procedure id="createMissingDistRec" parameterMap="createMissingDistRecMap">
		BEGIN
			giis_users_pkg.app_user := ?;
			GIPI_POLBASIC_POL_DIST_V1_PKG.create_missing_dist_rec(?, ?, ?, ?, ?, ?, ?);
		END;	
	</procedure>
	
	<select id="getPolDistV1Giuts999" resultMap="getGIPIPolbasicPolDistV1ResultMap" parameterClass="java.util.HashMap">
		SELECT *
		  FROM (SELECT rownum rownum_, 
		               b.count_, 
		               a.* 
		          FROM (SELECT * 
		                  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_giuts999(#moduleId#, #userId#, #paramLineCd#, #paramSublineCd#, #paramIssCd#,  #paramIssueYy#, #paramPolSeqNo#, #paramRenewNo#, #paramDistNo#))
		                  <isNotNull property="filter">
						  WHERE 1=1
								<isNotEmpty prepend="AND"  property="lineCd">
								UPPER(line_cd) LIKE UPPER(#lineCd#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								UPPER(subline_cd) LIKE UPPER(#sublineCd#)
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								UPPER(iss_cd) LIKE UPPER(#issCd#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								UPPER(endt_iss_cd) = UPPER(#endtIssCd#)
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>		
						  </isNotNull>
		                  <isEqual property="sortColumn" compareValue="policyNo">
			              		ORDER BY policy_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="assdName">
			              		ORDER BY assd_name
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="distNo">
			              		ORDER BY dist_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="endtNo">
			              		ORDER BY endt_no
			              </isEqual>
			              <isEqual property="sortColumn" compareValue="meanDistFlag">
			              		ORDER BY mean_dist_flag
			              </isEqual>
			          	  <isNotNull property="sortColumn">
			              		<isEqual property="ascDescFlg" compareValue="ASC">
			              			ASC
			              		</isEqual>
			              		<isEqual property="ascDescFlg" compareValue="DESC">
			              			DESC
			              		</isEqual>
			              </isNotNull>
		               ) a,
                       (SELECT count(*) count_ 
                          FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_giuts999(#moduleId#, #userId#, #paramLineCd#, #paramSublineCd#, #paramIssCd#,  #paramIssueYy#, #paramPolSeqNo#, #paramRenewNo#, #paramDistNo#))
                       <isNotNull property="filter">
						  WHERE 1=1
								<isNotEmpty prepend="AND"  property="lineCd">
								UPPER(line_cd) LIKE UPPER(#lineCd#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="sublineCd">
								UPPER(subline_cd) LIKE UPPER(#sublineCd#)
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="issCd">
								UPPER(iss_cd) LIKE UPPER(#issCd#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="issueYy">
								issue_yy LIKE #issueYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="polSeqNo">
								pol_seq_no = #polSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="renewNo">
								renew_no = #renewNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtIssCd">
								UPPER(endt_iss_cd) = UPPER(#endtIssCd#)
							    </isNotEmpty>
							    <isNotEmpty prepend="AND"  property="endtYy">
								endt_yy = #endtYy#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="endtSeqNo">
								endt_seq_no = #endtSeqNo#
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="assdName">
								UPPER(assd_name) LIKE UPPER(#assdName#)
							    </isNotEmpty>	
							    <isNotEmpty prepend="AND"  property="distNo">
								dist_no = #distNo#
							    </isNotEmpty>		
						  </isNotNull>
                       ) b)
		 WHERE rownum_ BETWEEN #from# AND #to#
	</select>
	
	<select id="getGIUWS016Rec" resultMap="getGIPIPolbasicPolDistV1ResultMap">
		SELECT '1' rownum_, 
		       '1' count_,
		        a.*
		  FROM TABLE (GIPI_POLBASIC_POL_DIST_V1_PKG.get_pol_dist_v1_tsi_prem_distr(#moduleId#, #userId#, #lineCd#, #sublineCd#, #issCd#, #issueYy#, #polSeqNo#, #renewNo#, #endtYy#, #endtSeqNo#, #assdName#, #distNo#)) a
	</select>
</sqlMap>
