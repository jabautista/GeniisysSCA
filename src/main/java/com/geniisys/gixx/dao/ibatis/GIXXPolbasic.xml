<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="GIXXPolbasic">

	<typeAlias alias="GIXXPolbasic" type="com.geniisys.gixx.entity.GIXXPolbasic" />
	
	<resultMap id="getPolicySummaryMap" class="GIXXPolbasic">
		<result column="EXTRACT_ID" 		property="extractId" />
		<result column="POLICY_ID"			property="policyId" />
		<result column="POLICY_NO"			property="polNo" />
		<result column="ISS_CD"				property="issCd" />
		<result column="LINE_CD"			property="lineCd" />
		<result column="SUBLINE_CD"				property="sublineCd" />
		<result column="ISSUE_YY"				property="issueYy" />
		<result column="POL_SEQ_NO"				property="polSeqNo" />
		<result column="RENEW_NO"				property="renewNo" />
		<result column="ASSD_NO"				property="assdNo" />
		<result column="ACCT_OF_CD"				property="acctOfCd" />
		<result column="ADDRESS1"				property="address1" />
		<result column="ADDRESS2"				property="address2" />
		<result column="ADDRESS3"				property="address3" />
		<result column="REF_POL_NO"				property="refPolNo" />
		<result column="TYPE_CD"				property="typeCd" />
		<result column="MANUAL_RENEW_NO"				property="manualRenewNo" />
		<result column="RISK_TAG"				property="riskTag" />
		<result column="INCEPT_DATE"				property="inceptDate" />
		<result column="INCEPT_TAG"				property="inceptTag" />
		<result column="EXPIRY_DATE"				property="expiryDate" />
		<result column="EXPIRY_TAG"				property="expiryTag" />
		<result column="EFF_DATE"				property="effDate" />
		<result column="ISSUE_DATE"				property="issueDate" />
		<result column="INDUSTRY_CD"				property="industryCd" />
		<result column="REGION_CD"				property="regionCd" />
		<result column="CRED_BRANCH"				property="credBranch" />
		<result column="PREM_AMT"				property="premAmt" />
		<result column="TSI_AMT"				property="tsiAmt" />
		<result column="PACK_POL_FLAG"				property="packPolFlag" />
		<result column="AUTO_RENEW_FLAG"				property="autoRenewFlag" />
		<result column="FOREIGN_ACC_SW"				property="foreignAccSw" />
		<result column="REG_POLICY_SW"				property="regPolicySw" />
		<result column="PREM_WARR_TAG"				property="premWarrTag" />
		<result column="CO_INSURANCE_SW"				property="coInsuranceSw" />
		<result column="INDUSTRY_NM"				property="dspIndustryNm" />
		<!-- <result column="DSP_TYPE_DESC"				property="dspTypeDesc" /> -->
		<result column="DSP_CRED_BRANCH"				property="dspCredBranch" />
		<result column="REGION_DESC"				property="regionDesc" />
		<result column="DRV_ASSD_NO"				property="assdName" />
		<result column="DSP_TYPE_DESC"				property="typeDesc" />
		<result column="NBT_RISK_TAG"				property="nbtRiskTag" />
		<result column="DRV_ACCT_OF"				property="drvAcctOf" />
		<result column="DSP_LABEL_TAG"				property="dspLabelTag" />
		
		<result column="POLICY_ID_TYPE"				property="policyIdType" />
		<result column="LINE_TYPE"					property="lineType" />
		<result column="BANK_BTN_LABEL"					property="bankBtnLabel" />
		<result column="DEFAULT_CURRENCY"					property="defaultCurrency" />
		<result column="IS_FOREIGN_CURRENCY"					property="isForeignCurrency" />
		<result column="DSP_RATE"					property="dspRate" />
		<result column="VARIABLES_SUBLINE_OPEN"					property="varSublineOpen" />
		<result column="VARIABLES_SUBLINE_MOP"					property="varSublineMop" />
				
		<result column="CONTRACT_PROJ_BUSS_TITLE"					property="contractProjBussTitle" />
		<result column="SITE_LOCATION"					property="siteLocation" />
		<result column="CONSTRUCT_START_DATE"					property="constructStartDate" />
		<result column="CONSTRUCT_END_DATE"					property="constructEndDate" />
		<result column="MAINTAIN_START_DATE"					property="maintainStartDate" />
		<result column="MAINTAIN_END_DATE"					property="maintainEndDate" />
		<result column="MBI_POLICY_NO"					property="mbiPolicyNo" />
		<result column="WEEKS_TEST"					property="weeksTest" />
		<result column="TIME_EXCESS"					property="timeExcess" />
		<result column="PROMPT_TITLE"					property="promptTitle" />
		<result column="PROMPT_LOCATION"					property="promptLocation" />
		<result column="SURVEY_AGENT_CD"					property="surveyAgentCd" />
		<result column="SURVEY_AGENT"					property="surveyAgent" />
		<result column="SETTLING_AGENT_CD"					property="settlingAgentCd" />
		<result column="SETTLING_AGENT"					property="settlingAgent" />
		<result column="SUBLINE_CD_PARAM"					property="sublineCdParam" /> <!-- added by robert SR 20307 10.27.15 -->
	</resultMap>
	
	<resultMap id="getPolicySummarySuMap" class="GIXXPolbasic">
		<result column="EXTRACT_ID"		property="extractId" />
		<result column="POLICY_ID"		property="policyId" />
		<result column="POL_FLAG"		property="polFlag" />
		<result column="AUTO_RENEW_FLAG"		property="autoRenewFlag" />
		<result column="REG_POLICY_SW"		property="regPolicySw" />
		<result column="ISSUE_DATE"		property="issueDate" />
		<result column="INCEPT_DATE"		property="inceptDate" />
		<result column="EXPIRY_DATE"		property="expiryDate" />
		<result column="EFF_DATE"		property="effDate" />
		<result column="ADDRESS1"		property="address1" />
		<result column="ADDRESS2"		property="address2" />
		<result column="ADDRESS3"		property="address3" />
		<result column="REF_POL_NO"		property="refPolNo" />
		<result column="MORTG_NAME"		property="mortgName" />
		<result column="LINE_CD"		property="lineCd" />
		<result column="SUBLINE_CD"		property="sublineCd" />
		<result column="INDUSTRY_NM"		property="dspIndustryNm" />
		<result column="REGION_DESC"		property="regionDesc" />
		<result column="VAL_PERIOD"		property="valPeriod" />
		<result column="VAL_PERIOD_UNIT"		property="valPeriodUnit" />
		<result column="POL_FLAG_DESC"		property="polFlagDesc" />
	</resultMap>
	
	<select id="getPolicySummary" parameterClass="java.util.HashMap" resultMap="getPolicySummaryMap">
		SELECT *
		  FROM (SELECT *
				  FROM TABLE(gixx_polbasic_pkg.get_policy_summary(#issCd#, #lineCd#, #sublineCd#, #issueYy#, #polSeqNo#, #renewNo#, #refPolNo#))
				 ORDER BY extract_id DESC)
		 WHERE rownum = 1
	</select>
	
	<select id="getPolicySummarySu" parameterClass="java.util.HashMap" resultMap="getPolicySummarySuMap">
		SELECT *
		  FROM (SELECT * 
		          FROM TABLE(gixx_polbasic_pkg.get_policy_summary_su(#issCd#, #lineCd#, #sublineCd#, #issueYy#, #polSeqNo#, #renewNo#, #refPolNo#))
		         ORDER BY extract_id DESC)
		 WHERE rownum = 1
	</select>

</sqlMap>